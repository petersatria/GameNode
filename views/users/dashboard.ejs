<% layout('layouts/boilerplate')%>

<div class="container my-5">
	<div class="row">
		<div class="col-6">
			<h1>Dashboard</h1>
		</div>
		<div class="col-6 d-flex justify-content-end">
			<a href="/dashboard/new" type="button" class="btn btn-success align-self-center">Add User</a>
		</div>
	</div>
	<div class="table-responsive">
		<table class="table table-bordered table-hover">
			<thead class="thead-dark">
				<tr>
					<th scope="col">#Id</th>
					<th scope="col">Username</th>
					<th scope="col">Email</th>
					<th scope="col" class="text-end">Action</th>
				</tr>
			</thead>
			<tbody>
				<% if(!user){ %>
				<% for(let user of users) { %>
				<tr>

					<th scope="row"><%= user._id %></th>
					<td><%= user.username %></td>
					<td><%= user.email %></td>

					<td class="text-end">
						<a href="/dashboard/<%= user._id %> " type="button" class="btn btn-light btn-small">
							Profile</a>
						<a href="/dashboard/history/<%= user._id %>" type="button" class="btn btn-light btn-small">
							History</a>
						<form action="/dashboard/<%=user._id%>?_method=DELETE" method="POST">
							<button class="btn btn-light btn-small">Delete</button>
						</form>
					</td>
				</tr>
				<% }%>
				<% } else{%>
				<tr>

					<th scope="row"><%= user._id %></th>
					<td><%= user.username %></td>
					<td><%= user.email %></td>

					<td class="text-end">
						<a href="/dashboard/<%= user._id %> " type="button" class="btn btn-light btn-small">
							Profile</a>
						<a href="/dashboard/history/<%= user._id %>" type="button" class="btn btn-light btn-small">
							History</a>
						<form action="/dashboard/<%=user._id%>?_method=DELETE" method="POST">
							<button class="btn btn-light btn-small">Delete</button>
						</form>
					</td>
				</tr>
				<% } %>
			</tbody>
		</table>
	</div>
</div>